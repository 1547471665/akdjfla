{"compress":true,"commitItems":[["49f6afef-b035-4c90-a850-64e1839b82bb",1528706242718,"",[[1528706188120,["wangnan@wangnandeMacBook-Pro.local",[[1,0,"12. Nginx日志切割\n===\n\n\n"]],[0,0],[20,20]]],[1528706220334,["wangnan@wangnandeMacBook-Pro.local",[[1,19,"# 1. 设置日志存放目录\nlogs_path=\"/data/log/nginx/wwwroot/\";\n\n# 2. 设置 nginx pid 文件\npid_file=\"/data/log/nginx/nginx.pid\";\n\n# 3. 创建分割存储的日期文件夹\n#datetime=`date -d \"yesterday\" +\"%Y%m%d%H%M%S\"`;\ndatetime=`date -d \"yesterday\" +\"%Y%m%d\"`;\nnew_log_path=$logs_path$datetime\n#echo $new_log_path;\nmkdir -p $new_log_path\n\n# 3. 按照日期移动所有已有日志文件\nlog_file_list=`ls -1 $logs_path`;\nfor log_file in $log_file_list;\ndo\n    log_file_name=$logs_path$log_file;\n    if [ -f $log_file_name ];\n    then\n        #echo File_nam\\e:$log_file_name;\n        mv $log_file_name $new_log_path;\n    #elif [ -d $log_file_name ];\n    #then\n       # echo Dir_name:$log_file_name;\n    fi\ndone"]],[19,19],[661,661]]],[1528706222074,["wangnan@wangnandeMacBook-Pro.local",[[1,19,"\n"]],[18,18],[19,19]]],[1528706224100,["wangnan@wangnandeMacBook-Pro.local",[[1,19,"```"]],[19,19],[22,22]]],[1528706225978,["wangnan@wangnandeMacBook-Pro.local",[[1,666,"\n"]],[665,665],[666,666]]],[1528706226733,["wangnan@wangnandeMacBook-Pro.local",[[-1,666,"\n"],[1,667,"```"]],[666,666],[669,669]]],[1528706247318,["wangnan@wangnandeMacBook-Pro.local",[[1,666,"\n"]],[665,665],[666,666]]],[1528706247735,["wangnan@wangnandeMacBook-Pro.local",[[1,667,"\n"]],[666,666],[667,667]]],[1528706247987,["wangnan@wangnandeMacBook-Pro.local",[[1,667,"#cat ${pid_file}\n# 4. nginx 重新加载日志\nkill -USR1 `cat ${pid_file}`\n#cat ${pid_file}"]],[667,667],[747,747]]],[1528706281744,["wangnan@wangnandeMacBook-Pro.local",[[1,19,"\n"]],[18,18],[19,19]]],[1528706282881,["wangnan@wangnandeMacBook-Pro.local",[[1,20,"\n"]],[19,19],[20,20]]],[1528706284500,["wangnan@wangnandeMacBook-Pro.local",[[1,21,"\n"]],[19,19],[20,20]]],[1528706286493,["wangnan@wangnandeMacBook-Pro.local",[[1,20,"## r"]],[20,20],[24,24]]],[1528706286829,["wangnan@wangnandeMacBook-Pro.local",[[-1,23,"r"]],[24,24],[23,23]]],[1528706287427,["wangnan@wangnandeMacBook-Pro.local",[[1,23,"shiy"]],[23,23],[27,27]]],[1528706288010,["wangnan@wangnandeMacBook-Pro.local",[[-1,23,"shiy"]],[27,27],[23,23]]],[1528706293773,["wangnan@wangnandeMacBook-Pro.local",[[1,23,"使用如下shell脚本"]],[23,23],[34,34]]],[1528706298271,["wangnan@wangnandeMacBook-Pro.local",[[1,40,"\n"]],[39,39],[40,40]]],[1528706299150,["wangnan@wangnandeMacBook-Pro.local",[[1,40,"、"]],[40,40],[41,41]]],[1528706299532,["wangnan@wangnandeMacBook-Pro.local",[[-1,40,"、"]],[41,41],[40,40]]],[1528706303267,["wangnan@wangnandeMacBook-Pro.local",[[1,40,"#!bin/bash"]],[40,40],[50,50]]],[1528706305539,["wangnan@wangnandeMacBook-Pro.local",[[1,51,"\n"]],[50,50],[51,51]]],[1528706319356,["wangnan@wangnandeMacBook-Pro.local",[[1,34," nginx_log_rotate.sh"]],[34,34],[54,54]]]]]]}