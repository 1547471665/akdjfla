{"compress":true,"commitItems":[["602fbff4-8f4b-4c59-96ed-15b070badaf4",1524816721191,"",[[1524816664724,["wangnan@wangnandeMacBook-Pro.local",[[1,0,"11. NFS\n===\n\n\n"]],[0,0],[14,14]]],[1524816675370,["wangnan@wangnandeMacBook-Pro.local",[[-1,13,"\n"],[1,14,"f"]],[14,14],[13,14]]],[1524816675756,["wangnan@wangnandeMacBook-Pro.local",[[1,14,"u"]],[13,14],[13,15]]],[1524816675853,["wangnan@wangnandeMacBook-Pro.local",[[1,15,"'w"]],[13,15],[13,17]]],[1524816675937,["wangnan@wangnandeMacBook-Pro.local",[[1,17,"u"]],[13,17],[13,18]]],[1524816676151,["wangnan@wangnandeMacBook-Pro.local",[[1,18,"'d"]],[13,18],[13,20]]],[1524816676271,["wangnan@wangnandeMacBook-Pro.local",[[1,20,"u"]],[13,20],[13,21]]],[1524816676351,["wangnan@wangnandeMacBook-Pro.local",[[1,21,"a"]],[13,21],[13,22]]],[1524816676454,["wangnan@wangnandeMacBook-Pro.local",[[1,22,"n"]],[13,22],[13,23]]],[1524816676840,["wangnan@wangnandeMacBook-Pro.local",[[-1,13,"fu'wu'duan"],[1,23,"服务端："]],[13,23],[17,17]]],[1524816677107,["wangnan@wangnandeMacBook-Pro.local",[[1,17,"\n\n"]],[17,17],[18,18]]],[1524816678142,["wangnan@wangnandeMacBook-Pro.local",[[1,19,"\n"]],[18,18],[19,19]]],[1524816678242,["wangnan@wangnandeMacBook-Pro.local",[[1,20,"\n"]],[19,19],[20,20]]],[1524816680428,["wangnan@wangnandeMacBook-Pro.local",[[-1,20,"\n"],[1,21,"客户端："]],[20,20],[24,24]]],[1524816680719,["wangnan@wangnandeMacBook-Pro.local",[[1,24,"\n\n"]],[24,24],[25,25]]],[1524816687086,["wangnan@wangnandeMacBook-Pro.local",[[1,13,"\n"]],[12,12],[13,13]]],[1524816688166,["wangnan@wangnandeMacBook-Pro.local",[[1,14,"\n"]],[12,12],[13,13]]],[1524816688439,["wangnan@wangnandeMacBook-Pro.local",[[1,13,"http://www.cnblogs.com/zhangmingcheng/p/6134210.html"]],[13,13],[65,65]]],[1524816689786,["wangnan@wangnandeMacBook-Pro.local",[[1,67,"\n"]],[65,65],[66,66]]],[1524816695921,["wangnan@wangnandeMacBook-Pro.local",[[1,66,"http://www.cnblogs.com/mchina/archive/2013/01/03/2840040.html"]],[66,66],[127,127]]],[1524816706571,["wangnan@wangnandeMacBook-Pro.local",[[1,134,"| \n\n yum install -y nfs-utils\n\n |"]],[134,134],[167,167]]],[1524816708360,["wangnan@wangnandeMacBook-Pro.local",[[-1,142," "],[1,143," "],[-1,150," -y "],[1,154," -y "],[-1,165," |"]],[167,167],[165,165]]],[1524816709328,["wangnan@wangnandeMacBook-Pro.local",[[-1,137,"\n"]],[137,137],[136,136]]],[1524816709677,["wangnan@wangnandeMacBook-Pro.local",[[-1,134,"| "]],[136,136],[134,134]]],[1524816710803,["wangnan@wangnandeMacBook-Pro.local",[[1,134,"···"]],[134,134],[137,137]]],[1524816712005,["wangnan@wangnandeMacBook-Pro.local",[[-1,134,"···"]],[137,137],[134,134]]],[1524816712845,["wangnan@wangnandeMacBook-Pro.local",[[1,134,"````"]],[134,134],[138,138]]],[1524816713693,["wangnan@wangnandeMacBook-Pro.local",[[-1,137,"`"]],[138,138],[137,137]]],[1524816715146,["wangnan@wangnandeMacBook-Pro.local",[[1,164,"```"]],[164,164],[167,167]]],[1524816717158,["wangnan@wangnandeMacBook-Pro.local",[[-1,138," "]],[139,139],[138,138]]],[1524816718745,["wangnan@wangnandeMacBook-Pro.local",[[1,175,"\n"]],[173,173],[174,174]]],[1524816719263,["wangnan@wangnandeMacBook-Pro.local",[[1,174,"```"]],[174,174],[177,177]]],[1524816719735,["wangnan@wangnandeMacBook-Pro.local",[[1,179,"\n"]],[177,177],[178,178]]],[1524816720264,["wangnan@wangnandeMacBook-Pro.local",[[1,178,"```"]],[178,178],[181,181]]],[1524816725010,["wangnan@wangnandeMacBook-Pro.local",[[1,178,"\n"]],[177,177],[178,178]]],[1524816725158,["wangnan@wangnandeMacBook-Pro.local",[[1,178,"yum install -y nfs-utils\n"]],[178,178],[203,203]]],[1524816728340,["wangnan@wangnandeMacBook-Pro.local",[[-1,0,"11. "]],[4,4],[0,0]]],[1524816734405,["wangnan@wangnandeMacBook-Pro.local",[[1,0,"CentOS 7.2 ins"]],[0,0],[14,14]]],[1524816735226,["wangnan@wangnandeMacBook-Pro.local",[[-1,11,"ins"]],[14,14],[11,11]]],[1524816736599,["wangnan@wangnandeMacBook-Pro.local",[[1,11,"Install "]],[11,11],[19,19]]],[1524816794177,["wangnan@wangnandeMacBook-Pro.local",[[1,184,"\n"]],[182,182],[183,183]]],[1524816794289,["wangnan@wangnandeMacBook-Pro.local",[[1,185,"\n"]],[183,183],[184,184]]],[1524816795402,["wangnan@wangnandeMacBook-Pro.local",[[1,186,"\n"]],[183,183],[184,184]]],[1524816795551,["wangnan@wangnandeMacBook-Pro.local",[[1,187,"\n"]],[184,184],[185,185]]],[1524816798976,["wangnan@wangnandeMacBook-Pro.local",[[1,185,"配置参考"]],[185,185],[189,189]]],[1524816799171,["wangnan@wangnandeMacBook-Pro.local",[[1,192,"\n"]],[189,189],[190,190]]],[1524816799423,["wangnan@wangnandeMacBook-Pro.local",[[1,190,"NFS服务器的配置相对比较简单，只需要在相应的配置文件中进行设置，然后启动NFS服务器即可。\n\nNFS的常用目录\n\n/etc/exports                           NFS服务的主要配置文件\n\n/usr/sbin/exportfs                   NFS服务的管理命令\n\n/usr/sbin/showmount              客户端的查看命令\n\n/var/lib/nfs/etab                      记录NFS分享出来的目录的完整权限设定值\n\n/var/lib/nfs/xtab                      记录曾经登录过的客户端信息\n\nNFS服务的配置文件为 /etc/exports，这个文件是NFS的主要配置文件，不过系统并没有默认值，所以这个文件不一定会存在，可能要使用vim手动建立，然后在文件里面写入配置内容。\n\n/etc/exports文件内容格式：\n\n<输出目录> [客户端1 选项（访问权限,用户映射,其他）] [客户端2 选项（访问权限,用户映射,其他）]\n\na. 输出目录：\n\n输出目录是指NFS系统中需要共享给客户机使用的目录；\n\nb. 客户端：\n\n客户端是指网络中可以访问这个NFS输出目录的计算机\n\n客户端常用的指定方式\n\n*   指定ip地址的主机：192.168.0.200\n*   指定子网中的所有主机：192.168.0.0/24 192.168.0.0/255.255.255.0\n*   指定域名的主机：david.bsmart.cn\n*   指定域中的所有主机：*.bsmart.cn\n*   所有主机：*\n\nc. 选项：\n\n选项用来设置输出目录的访问权限、用户映射等。\n\nNFS主要有3类选项：\n\n访问权限选项\n\n*   设置输出目录只读：ro\n*   设置输出目录读写：rw\n\n用户映射选项\n\n*   all_squash：将远程访问的所有普通用户及所属组都映射为匿名用户或用户组（nfsnobody）；\n*   no_all_squash：与all_squash取反（默认设置）；\n*   root_squash：将root用户及所属组都映射为匿名用户或用户组（默认设置）；\n*   no_root_squash：与rootsquash取反；\n*   anonuid=xxx：将远程访问的所有用户都映射为匿名用户，并指定该用户为本地用户（UID=xxx）；\n*   anongid=xxx：将远程访问的所有用户组都映射为匿名用户组账户，并指定该匿名用户组账户为本地用户组账户（GID=xxx）；\n\n其它选项\n\n*   secure：限制客户端只能从小于1024的tcp/ip端口连接nfs服务器（默认设置）；\n*   insecure：允许客户端从大于1024的tcp/ip端口连接服务器；\n*   sync：将数据同步写入内存缓冲区与磁盘中，效率低，但可以保证数据的一致性；\n*   async：将数据先保存在内存缓冲区中，必要时才写入磁盘；\n*   wdelay：检查是否有相关的写操作，如果有则将这些写操作一起执行，这样可以提高效率（默认设置）；\n*   no_wdelay：若有写操作则立即执行，应与sync配合使用；\n*   subtree：若输出目录是一个子目录，则nfs服务器将检查其父目录的权限(默认设置)；\n*   no_subtree：即使输出目录是一个子目录，nfs服务器也不检查其父目录的权限，这样可以提高效率；"]],[190,190],[1681,1681]]],[1524816805998,["wangnan@wangnandeMacBook-Pro.local",[[-1,261,"                          "],[1,287,"                          "],[-1,320,"                 "],[1,337,"                 "],[-1,370,"             "],[1,383,"             "],[-1,411,"                     "],[1,432,"                     "],[-1,472,"                     "],[1,493,"                     "],[-1,519," "],[1,520," "],[-1,822," "],[1,823," "],[-1,1684,"客户端：\n```\nyum install -y nfs-utils\n\n```"]],[1684,1722],[1684,1684]]],[1524816808723,["wangnan@wangnandeMacBook-Pro.local",[[1,185,"\n"]],[184,184],[185,185]]],[1524816808834,["wangnan@wangnandeMacBook-Pro.local",[[1,186,"\n"]],[185,185],[186,186]]],[1524816808948,["wangnan@wangnandeMacBook-Pro.local",[[1,187,"\n"]],[186,186],[187,187]]],[1524816809037,["wangnan@wangnandeMacBook-Pro.local",[[1,188,"\n"]],[187,187],[188,188]]],[1524816810502,["wangnan@wangnandeMacBook-Pro.local",[[1,188,"附录："]],[188,188],[191,191]]],[1524816811885,["wangnan@wangnandeMacBook-Pro.local",[[1,192,"\n"]],[191,191],[192,192]]],[1524816813067,["wangnan@wangnandeMacBook-Pro.local",[[1,183,"客户端：\n```\nyum install -y nfs-utils\n\n```"]],[183,183],[221,221]]],[1524816826071,["wangnan@wangnandeMacBook-Pro.local",[[1,178,"\n"]],[177,177],[178,178]]],[1524816826972,["wangnan@wangnandeMacBook-Pro.local",[[1,179,"\n"]],[178,178],[179,179]]],[1524816827209,["wangnan@wangnandeMacBook-Pro.local",[[1,180,"\n"]],[179,179],[180,180]]],[1524816831067,["wangnan@wangnandeMacBook-Pro.local",[[1,179,"echo >"]],[179,179],[185,185]]],[1524816831449,["wangnan@wangnandeMacBook-Pro.local",[[-1,184,">"]],[185,185],[184,184]]],[1524816836016,["wangnan@wangnandeMacBook-Pro.local",[[1,184,"'' >> /etc/"]],[184,184],[195,195]]],[1524816836939,["wangnan@wangnandeMacBook-Pro.local",[[-1,190,"/etc/"]],[195,195],[190,190]]],[1524816837158,["wangnan@wangnandeMacBook-Pro.local",[[1,190,"/etc/exports"]],[190,190],[202,202]]],[1524816873358,["wangnan@wangnandeMacBook-Pro.local",[[1,202,"/data/wwwroot/upload   *.anhao(rw,no_root_squash,no_all_squash,sync)"]],[202,202],[270,270]]],[1524816874181,["wangnan@wangnandeMacBook-Pro.local",[[-1,190,"/etc/exports/data/wwwroot/upload   *.anhao(rw,no_root_squash,no_all_squash,sync)"]],[270,270],[190,190]]],[1524816876485,["wangnan@wangnandeMacBook-Pro.local",[[1,185,"/data/wwwroot/upload   *.anhao(rw,no_root_squash,no_all_squash,sync)"]],[185,185],[253,253]]],[1524816887913,["wangnan@wangnandeMacBook-Pro.local",[[1,258,"expo"]],[258,258],[262,262]]],[1524816888769,["wangnan@wangnandeMacBook-Pro.local",[[-1,258,"expo"]],[262,262],[258,258]]],[1524816889469,["wangnan@wangnandeMacBook-Pro.local",[[1,258,"expo"]],[258,258],[262,262]]],[1524816889830,["wangnan@wangnandeMacBook-Pro.local",[[-1,258,"expo"]],[262,262],[258,258]]],[1524816890123,["wangnan@wangnandeMacBook-Pro.local",[[-1,185,"/data/wwwroot/upload   *.anhao(rw,no_root_squash,no_all_squash,sync)"]],[253,253],[185,185]]],[1524816891169,["wangnan@wangnandeMacBook-Pro.local",[[1,190,"/etc/"]],[190,190],[195,195]]],[1524816891899,["wangnan@wangnandeMacBook-Pro.local",[[-1,184,"'' >> /etc/"]],[195,195],[184,184]]],[1524816897387,["wangnan@wangnandeMacBook-Pro.local",[[1,184,"'' >> /etc/ex"]],[184,184],[197,197]]],[1524816899753,["wangnan@wangnandeMacBook-Pro.local",[[1,185,"/data/wwwroot/upload   *.anhao(rw,no_root_squash,no_all_squash,sync)"]],[185,185],[253,253]]],[1524816908906,["wangnan@wangnandeMacBook-Pro.local",[[-1,258,"/etc/ex"]],[265,265],[258,258]]],[1524816909156,["wangnan@wangnandeMacBook-Pro.local",[[1,258,"/etc/exports"]],[258,258],[270,270]]],[1524816938021,["wangnan@wangnandeMacBook-Pro.local",[[-1,178,"\n"]],[178,178],[177,177]]],[1524816938969,["wangnan@wangnandeMacBook-Pro.local",[[1,270,"systemctl enable rpcbind && systemctl start rpcbind"]],[270,270],[321,321]]],[1524816939550,["wangnan@wangnandeMacBook-Pro.local",[[1,322,"\n"]],[321,321],[322,322]]],[1524816946777,["wangnan@wangnandeMacBook-Pro.local",[[1,322,"systemctl enable nfs-server && systemctl start nfs-server"]],[322,322],[379,379]]],[1524816947719,["wangnan@wangnandeMacBook-Pro.local",[[1,380,"\n"]],[379,379],[380,380]]],[1524816977665,["wangnan@wangnandeMacBook-Pro.local",[[1,380,"exportfs -a"]],[380,380],[391,391]]],[1524817029971,["wangnan@wangnandeMacBook-Pro.local",[[1,380,"\n"]],[379,379],[380,380]]],[1524817030152,["wangnan@wangnandeMacBook-Pro.local",[[1,380,"rpcinfo -p"]],[380,380],[390,390]]],[1524817036519,["wangnan@wangnandeMacBook-Pro.local",[[1,380,"\n"],[-1,387," "],[1,388," 确认 "]],[379,379],[383,383]]],[1524817037495,["wangnan@wangnandeMacBook-Pro.local",[[-1,380,"确认 "]],[383,383],[380,380]]],[1524817039700,["wangnan@wangnandeMacBook-Pro.local",[[1,380,"# queren"]],[380,380],[388,388]]],[1524817040409,["wangnan@wangnandeMacBook-Pro.local",[[-1,382,"queren"]],[388,388],[382,382]]],[1524817043234,["wangnan@wangnandeMacBook-Pro.local",[[1,382,"确认rpcin"]],[382,382],[389,389]]],[1524817043717,["wangnan@wangnandeMacBook-Pro.local",[[-1,387,"in"]],[389,389],[387,387]]],[1524817046955,["wangnan@wangnandeMacBook-Pro.local",[[1,387,"bind是否启动"]],[387,387],[395,395]]],[1524817059807,["wangnan@wangnandeMacBook-Pro.local",[[1,419,"\n"]],[418,418],[419,419]]],[1524817060067,["wangnan@wangnandeMacBook-Pro.local",[[1,419,"exportfs"]],[419,419],[427,427]]],[1524817061370,["wangnan@wangnandeMacBook-Pro.local",[[1,407,"\n"]],[406,406],[407,407]]],[1524817064225,["wangnan@wangnandeMacBook-Pro.local",[[1,420,"\n"]],[419,419],[420,420]]],[1524817065204,["wangnan@wangnandeMacBook-Pro.local",[[1,421,"\n"]],[420,420],[421,421]]],[1524817066769,["wangnan@wangnandeMacBook-Pro.local",[[1,421,"# chaka"]],[421,421],[428,428]]],[1524817067534,["wangnan@wangnandeMacBook-Pro.local",[[-1,423,"chaka"]],[428,428],[423,423]]],[1524817070146,["wangnan@wangnandeMacBook-Pro.local",[[1,423,"查看目录"]],[423,423],[427,427]]],[1524817076566,["wangnan@wangnandeMacBook-Pro.local",[[1,425,"共享"]],[425,425],[427,427]]],[1524817148414,[null,[[1,395,"\nrp"],[-1,400," 确认"]],[395,395],[400,400]]],[1524817148414,[null,[[-1,395,"\nrp"],[1,403," 确认"]],[400,400],[395,395]]],[1524817090251,["wangnan@wangnandeMacBook-Pro.local",[[1,478,"**`systemctl ``enable` `rpcbind.service`**"]],[478,478],[520,520]]],[1524817092880,["wangnan@wangnandeMacBook-Pro.local",[[-1,490," "],[1,491," "],[-1,500," "],[1,501," "],[-1,518,"**"]],[520,520],[518,518]]],[1524817096311,["wangnan@wangnandeMacBook-Pro.local",[[-1,491,"``"]],[493,493],[491,491]]],[1524817097966,["wangnan@wangnandeMacBook-Pro.local",[[-1,478,"**`"]],[481,481],[478,478]]],[1524817098954,["wangnan@wangnandeMacBook-Pro.local",[[-1,512,"`"]],[513,513],[512,512]]],[1524817100811,["wangnan@wangnandeMacBook-Pro.local",[[-1,496,"`"]],[497,497],[496,496]]],[1524817101654,["wangnan@wangnandeMacBook-Pro.local",[[-1,494,"`"]],[495,495],[494,494]]],[1524817103353,["wangnan@wangnandeMacBook-Pro.local",[[1,511,"\n"]],[510,510],[511,511]]],[1524817110159,["wangnan@wangnandeMacBook-Pro.local",[[1,511,"**systemctl start rpcbind.service**"]],[511,511],[546,546]]],[1524817111713,["wangnan@wangnandeMacBook-Pro.local",[[-1,522," "],[1,523," "],[-1,528," "],[1,529," "],[-1,544,"**"]],[546,546],[544,544]]],[1524817113457,["wangnan@wangnandeMacBook-Pro.local",[[-1,511,"**"]],[513,513],[511,511]]],[1524817115065,["wangnan@wangnandeMacBook-Pro.local",[[1,543,"\n"]],[542,542],[543,543]]],[1524817124609,["wangnan@wangnandeMacBook-Pro.local",[[1,543,"**注意：客户端不需要启动nfs服务**"]],[543,543],[563,563]]],[1524817126158,["wangnan@wangnandeMacBook-Pro.local",[[-1,543,"**"]],[545,545],[543,543]]],[1524817132538,["wangnan@wangnandeMacBook-Pro.local",[[1,543,"# **"]],[543,543],[547,547]]],[1524817134234,["wangnan@wangnandeMacBook-Pro.local",[[1,566,"\n"]],[565,565],[566,566]]],[1524817144332,["wangnan@wangnandeMacBook-Pro.local",[[1,566,"cd /home && mkdir /nfs\n\nmount -t nfs 192.168.248.208:/home/nfs /home/nfs"]],[566,566],[638,638]]],[1524817183186,[null,[[1,395,"\nrp"],[-1,400," 确认"]],[395,395],[400,400]]],[1524817183187,[null,[[-1,395,"\nrp"],[1,403," 确认"]],[400,400],[395,395]]],[1524817149456,["wangnan@wangnandeMacBook-Pro.local",[[-1,566,"cd /home && mkdir /nfs"],[-1,595," -t nfs "],[1,603," -t nfs "],[-1,628," "],[1,629," "]],[566,588],[566,566]]],[1524817161821,["wangnan@wangnandeMacBook-Pro.local",[[1,567,"mkdir /data/wwwroot/upload"]],[567,567],[593,593]]],[1524817166063,["wangnan@wangnandeMacBook-Pro.local",[[-1,607,"192.168.248.208"]],[607,622],[607,607]]],[1524817170562,["wangnan@wangnandeMacBook-Pro.local",[[1,607,"1.app.anhao"]],[607,607],[618,618]]],[1524817177348,["wangnan@wangnandeMacBook-Pro.local",[[-1,620,"home/nfs"],[1,628,"data/wwwroot/upload"]],[619,628],[639,639]]],[1524817179037,["wangnan@wangnandeMacBook-Pro.local",[[1,640," "]],[640,640],[641,641]]],[1524817181859,["wangnan@wangnandeMacBook-Pro.local",[[-1,642,"home/nfs"],[1,650,"data/wwwroot/upload"]],[641,641],[661,661]]],[1524817243192,[null,[[1,395,"\nrp"],[-1,400," 确认"]],[395,395],[400,400]]],[1524817243192,[null,[[-1,395,"\nrp"],[1,403," 确认"]],[400,400],[395,395]]],[1524817230629,["wangnan@wangnandeMacBook-Pro.local",[[1,593," &&"]],[567,661],[596,596]]],[1524817232887,["wangnan@wangnandeMacBook-Pro.local",[[-1,593," &&"]],[596,596],[593,593]]],[1524817273940,[null,[[1,395,"\nrp"],[-1,400," 确认"]],[395,395],[400,400]]],[1524817273940,[null,[[-1,395,"\nrp"],[1,403," 确认"]],[400,400],[395,395]]],[1524817244644,["wangnan@wangnandeMacBook-Pro.local",[[1,573," -p"]],[572,572],[575,575]]],[1524817245973,["wangnan@wangnandeMacBook-Pro.local",[[-1,574,"p"]],[575,575],[574,574]]],[1524817246232,["wangnan@wangnandeMacBook-Pro.local",[[1,574,"P"]],[574,574],[575,575]]],[1524817258628,["wangnan@wangnandeMacBook-Pro.local",[[-1,574,"P"]],[575,575],[574,574]]],[1524817258866,["wangnan@wangnandeMacBook-Pro.local",[[1,574,"p"]],[574,574],[575,575]]],[1524817269642,["wangnan@wangnandeMacBook-Pro.local",[[1,665,"\n"]],[664,664],[665,665]]],[1524817270229,["wangnan@wangnandeMacBook-Pro.local",[[1,665,"df"]],[665,665],[667,667]]]]],["3043f92c-9630-4855-9400-607d073c245e",1531809681740,"CentOS 7.2 Install NFS\n===\n\nhttp://www.cnblogs.com/zhangmingcheng/p/6134210.html\nhttp://www.cnblogs.com/mchina/archive/2013/01/03/2840040.html\n\n服务端：\n```\nyum install -y nfs-utils\necho '/data/wwwroot/upload   *.anhao(rw,no_root_squash,no_all_squash,sync)' >> /etc/exports\nsystemctl enable rpcbind && systemctl start rpcbind\nsystemctl enable nfs-server && systemctl start nfs-server\n# 确认rpcbind是否启动\nrpcinfo -p\n\nexportfs -a\n\n# 查看共享目录\nexportfs\n```\n\n客户端：\n```\nyum install -y nfs-utils\nsystemctl enable rpcbind.service\nsystemctl start rpcbind.service\n# **注意：客户端不需要启动nfs服务**\n\nmkdir -p /data/wwwroot/upload\nmount -t nfs 1.app.anhao:/data/wwwroot/upload  /data/wwwroot/upload\ndf\n```\n\n\n\n\n附录：\n\n配置参考\nNFS服务器的配置相对比较简单，只需要在相应的配置文件中进行设置，然后启动NFS服务器即可。\n\nNFS的常用目录\n\n/etc/exports                           NFS服务的主要配置文件\n\n/usr/sbin/exportfs                   NFS服务的管理命令\n\n/usr/sbin/showmount              客户端的查看命令\n\n/var/lib/nfs/etab                      记录NFS分享出来的目录的完整权限设定值\n\n/var/lib/nfs/xtab                      记录曾经登录过的客户端信息\n\nNFS服务的配置文件为 /etc/exports，这个文件是NFS的主要配置文件，不过系统并没有默认值，所以这个文件不一定会存在，可能要使用vim手动建立，然后在文件里面写入配置内容。\n\n/etc/exports文件内容格式：\n\n<输出目录> [客户端1 选项（访问权限,用户映射,其他）] [客户端2 选项（访问权限,用户映射,其他）]\n\na. 输出目录：\n\n输出目录是指NFS系统中需要共享给客户机使用的目录；\n\nb. 客户端：\n\n客户端是指网络中可以访问这个NFS输出目录的计算机\n\n客户端常用的指定方式\n\n*   指定ip地址的主机：192.168.0.200\n*   指定子网中的所有主机：192.168.0.0/24 192.168.0.0/255.255.255.0\n*   指定域名的主机：david.bsmart.cn\n*   指定域中的所有主机：*.bsmart.cn\n*   所有主机：*\n\nc. 选项：\n\n选项用来设置输出目录的访问权限、用户映射等。\n\nNFS主要有3类选项：\n\n访问权限选项\n\n*   设置输出目录只读：ro\n*   设置输出目录读写：rw\n\n用户映射选项\n\n*   all_squash：将远程访问的所有普通用户及所属组都映射为匿名用户或用户组（nfsnobody）；\n*   no_all_squash：与all_squash取反（默认设置）；\n*   root_squash：将root用户及所属组都映射为匿名用户或用户组（默认设置）；\n*   no_root_squash：与rootsquash取反；\n*   anonuid=xxx：将远程访问的所有用户都映射为匿名用户，并指定该用户为本地用户（UID=xxx）；\n*   anongid=xxx：将远程访问的所有用户组都映射为匿名用户组账户，并指定该匿名用户组账户为本地用户组账户（GID=xxx）；\n\n其它选项\n\n*   secure：限制客户端只能从小于1024的tcp/ip端口连接nfs服务器（默认设置）；\n*   insecure：允许客户端从大于1024的tcp/ip端口连接服务器；\n*   sync：将数据同步写入内存缓冲区与磁盘中，效率低，但可以保证数据的一致性；\n*   async：将数据先保存在内存缓冲区中，必要时才写入磁盘；\n*   wdelay：检查是否有相关的写操作，如果有则将这些写操作一起执行，这样可以提高效率（默认设置）；\n*   no_wdelay：若有写操作则立即执行，应与sync配合使用；\n*   subtree：若输出目录是一个子目录，则nfs服务器将检查其父目录的权限(默认设置)；\n*   no_subtree：即使输出目录是一个子目录，nfs服务器也不检查其父目录的权限，这样可以提高效率；\n\n\n\n\n",[[1531809655648,["wangnan@wangnandeMacBook-Pro.local",[[1,672,"### 错误：\n\n[root@localhost]# mount -t nfs 192.168.0.106:/home/nfs1\nmount: wrong fs type, bad option, bad superblock on 192.168.0.106:/home/nfs1,\n       missing codepage or helper program, or other error\n       (for several filesystems (e.g. nfs, cifs) you might\n       need a /sbin/mount.<type> helper program)\n       In some cases useful info is found in syslog - try\n       dmesg | tail  or so\n\n解决办法：\n\napt-get install nfs-common\n\n或者\n\nyum install nfs-utils"]],[672,672],[1127,1127]]],[1531809671886,["wangnan@wangnandeMacBook-Pro.local",[[-1,673,"## 错误：\n\n[root@localhost]# mount -t nfs 192.168.0.106:/home/nfs1"],[1,736,""],[-1,815,"       "],[1,822,"       "],[-1,873,"       "],[1,880,"       "],[-1,932,"       "],[1,939,"       "],[-1,981,"       "],[1,988,"       "],[-1,1039,"       "],[1,1046,"       "],[-1,1059," "],[1,1060," "]],[673,736],[673,673]]],[1531809672265,["wangnan@wangnandeMacBook-Pro.local",[[-1,672,"#"]],[673,673],[672,672]]],[1531809673020,["wangnan@wangnandeMacBook-Pro.local",[[1,672,"!"]],[672,672],[673,673]]],[1531809673401,["wangnan@wangnandeMacBook-Pro.local",[[-1,672,"!"]],[673,673],[672,672]]],[1531809674932,["wangnan@wangnandeMacBook-Pro.local",[[1,672,"Q1:"]],[672,672],[675,675]]],[1531809679521,["wangnan@wangnandeMacBook-Pro.local",[[-1,1006,"解决办法"]],[1010,1010],[1006,1006]]],[1531809680211,["wangnan@wangnandeMacBook-Pro.local",[[1,1006,"A1"]],[1006,1006],[1008,1008]]],[1531809681757,["wangnan@wangnandeMacBook-Pro.local",[[-1,1008,"："]],[1009,1009],[1008,1008]]],[1531809682549,["wangnan@wangnandeMacBook-Pro.local",[[1,1008,"\""]],[1008,1008],[1009,1009]]],[1531809683087,["wangnan@wangnandeMacBook-Pro.local",[[-1,1008,"\""]],[1009,1009],[1008,1008]]],[1531809683539,["wangnan@wangnandeMacBook-Pro.local",[[1,1008,":"]],[1008,1008],[1009,1009]]],[1531809687531,["wangnan@wangnandeMacBook-Pro.local",[[-1,1042,"\n"]],[1042,1042],[1041,1041]]],[1531809687914,["wangnan@wangnandeMacBook-Pro.local",[[-1,1039,"或者"]],[1041,1041],[1039,1039]]],[1531809688209,["wangnan@wangnandeMacBook-Pro.local",[[-1,1039,"\n"]],[1039,1039],[1038,1038]]],[1531809688780,["wangnan@wangnandeMacBook-Pro.local",[[-1,1038,"\n"]],[1038,1038],[1037,1037]]],[1531809690130,["wangnan@wangnandeMacBook-Pro.local",[[1,1038,"\n"]],[1037,1037],[1038,1038]]],[1531809691844,["wangnan@wangnandeMacBook-Pro.local",[[1,1010,"```"]],[1010,1010],[1013,1013]]],[1531809694305,["wangnan@wangnandeMacBook-Pro.local",[[1,1064,"```"]],[1064,1064],[1067,1067]]],[1531809696711,["wangnan@wangnandeMacBook-Pro.local",[[1,1014,"\n"]],[1013,1013],[1014,1014]]],[1531809698849,["wangnan@wangnandeMacBook-Pro.local",[[1,1014,"ubuntu"]],[1014,1014],[1020,1020]]],[1531809700739,["wangnan@wangnandeMacBook-Pro.local",[[1,1049,"\n"]],[1048,1048],[1049,1049]]],[1531809701978,["wangnan@wangnandeMacBook-Pro.local",[[1,1049,"centos"]],[1049,1049],[1055,1055]]],[1531809705329,["wangnan@wangnandeMacBook-Pro.local",[[-1,1049,"centos\n"]],[1048,1055],[1048,1048]]],[1531809707365,["wangnan@wangnandeMacBook-Pro.local",[[-1,1014,"ubuntu"]],[1020,1020],[1014,1014]]],[1531809707692,["wangnan@wangnandeMacBook-Pro.local",[[-1,1014,"\n"]],[1014,1014],[1013,1013]]],[1531810434226,["wangnan@wangnandeMacBook-Pro.local",[[-1,1005,"\n"]],[1005,1005],[1004,1004]]],[1531810434686,["wangnan@wangnandeMacBook-Pro.local",[[-1,1003,"o"]],[1004,1004],[1003,1003]]],[1531810435820,["wangnan@wangnandeMacBook-Pro.local",[[1,1003,"o"]],[1003,1003],[1004,1004]]],[1531810437668,["wangnan@wangnandeMacBook-Pro.local",[[1,1069,"\n"]],[1066,1066],[1067,1067]]],[1531810440212,["wangnan@wangnandeMacBook-Pro.local",[[1,1067,"Q2: "]],[1067,1067],[1071,1071]]],[1531810440834,["wangnan@wangnandeMacBook-Pro.local",[[1,1074,"\n"]],[1071,1071],[1072,1072]]],[1531810441068,["wangnan@wangnandeMacBook-Pro.local",[[1,1072,"mount.nfs: access denied by server while mounting 1.app.anhao:/data/wwwroot/upload"]],[1072,1072],[1154,1154]]],[1531810441561,["wangnan@wangnandeMacBook-Pro.local",[[1,1157,"\n"]],[1154,1154],[1155,1155]]],[1531810442754,["wangnan@wangnandeMacBook-Pro.local",[[1,1155,"A2:"]],[1155,1155],[1158,1158]]],[1531810443136,["wangnan@wangnandeMacBook-Pro.local",[[1,1161,"\n"]],[1158,1158],[1159,1159]]],[1531810444265,["wangnan@wangnandeMacBook-Pro.local",[[1,1159,"qu "]],[1159,1159],[1162,1162]]],[1531810444766,["wangnan@wangnandeMacBook-Pro.local",[[-1,1159,"qu "]],[1162,1162],[1159,1159]]],[1531810445366,["wangnan@wangnandeMacBook-Pro.local",[[1,1159,"qu"]],[1159,1159],[1161,1161]]],[1531810445915,["wangnan@wangnandeMacBook-Pro.local",[[-1,1159,"qu"]],[1161,1161],[1159,1159]]],[1531810449439,["wangnan@wangnandeMacBook-Pro.local",[[1,1159,"qu "]],[1159,1159],[1162,1162]]],[1531810449875,["wangnan@wangnandeMacBook-Pro.local",[[-1,1159,"qu "]],[1162,1162],[1159,1159]]],[1531810455211,["wangnan@wangnandeMacBook-Pro.local",[[1,1159,"去服务端，vim /"]],[1159,1159],[1169,1169]]],[1531810469070,["wangnan@wangnandeMacBook-Pro.local",[[-1,1163,"，vim /"]],[1169,1169],[1163,1163]]],[1531810470037,["wangnan@wangnandeMacBook-Pro.local",[[1,1166,"\n"]],[1163,1163],[1164,1164]]],[1531810471185,["wangnan@wangnandeMacBook-Pro.local",[[1,1164,"```"]],[1164,1164],[1167,1167]]],[1531810471420,["wangnan@wangnandeMacBook-Pro.local",[[1,1170,"\n"]],[1167,1167],[1168,1168]]],[1531810471964,["wangnan@wangnandeMacBook-Pro.local",[[1,1168,"```"]],[1168,1168],[1171,1171]]],[1531810473186,["wangnan@wangnandeMacBook-Pro.local",[[1,1168,"\n"]],[1167,1167],[1168,1168]]],[1531810473477,["wangnan@wangnandeMacBook-Pro.local",[[1,1168,"vim /etc/exports"]],[1168,1168],[1184,1184]]],[1531810474401,["wangnan@wangnandeMacBook-Pro.local",[[1,1185,"\n"]],[1184,1184],[1185,1185]]],[1531810483701,["wangnan@wangnandeMacBook-Pro.local",[[1,1185,"# <输出目录> [客户端1 选项（访问权限,用户映射,其他）] [客户端2 选项（访问权限,用户映射,其他）]\n  2 /data/wwwroot/upload   *.anhao(rw,no_root_squash,no_all_squash,sync)"]],[1185,1185],[1314,1314]]],[1531810491187,["wangnan@wangnandeMacBook-Pro.local",[[-1,1242,"  2 "]],[1245,1245],[1242,1242]]],[1531883450717,["wangnan@wangnandeMacBook-Pro.local",[[1,144,"\n"]],[142,142],[143,143]]],[1531883450851,["wangnan@wangnandeMacBook-Pro.local",[[1,145,"\n"]],[143,143],[144,144]]],[1531883453632,["wangnan@wangnandeMacBook-Pro.local",[[1,144,"****"]],[144,144],[148,148]]],[1531883454790,["wangnan@wangnandeMacBook-Pro.local",[[1,146,"\n"]],[146,146],[147,147]]],[1531883455374,["wangnan@wangnandeMacBook-Pro.local",[[1,147,"\n"]],[147,147],[148,148]]],[1531883456004,["wangnan@wangnandeMacBook-Pro.local",[[-1,147,"\n"]],[148,148],[147,147]]],[1531883456195,["wangnan@wangnandeMacBook-Pro.local",[[-1,146,"\n"]],[147,147],[146,146]]],[1531883456648,["wangnan@wangnandeMacBook-Pro.local",[[1,146," "]],[146,146],[147,147]]],[1531883458953,["wangnan@wangnandeMacBook-Pro.local",[[1,147," zhongya"]],[146,146],[154,154]]],[1531883460020,["wangnan@wangnandeMacBook-Pro.local",[[-1,147,"zhongya"]],[154,154],[147,147]]],[1531883464794,["wangnan@wangnandeMacBook-Pro.local",[[1,147,"重要，目录权限问题"]],[147,147],[156,156]]],[1531883466681,["wangnan@wangnandeMacBook-Pro.local",[[1,161,"\n"]],[159,159],[160,160]]],[1531883480644,["wangnan@wangnandeMacBook-Pro.local",[[1,160,"- 服务端目录的用户应该和"]],[160,160],[173,173]]],[1531883484399,["wangnan@wangnandeMacBook-Pro.local",[[-1,162,"服务端"]],[165,165],[162,162]]],[1531883492377,["wangnan@wangnandeMacBook-Pro.local",[[1,162,"客户端想要操作NFS"]],[162,162],[172,172]]],[1531883503339,["wangnan@wangnandeMacBook-Pro.local",[[1,180,"服务端目录用户"]],[180,180],[187,187]]],[1531883518895,[null,[[-1,156,"a"],[1,157," "]],[156,156],[158,158]]],[1531883518896,[null,[[1,156,"a"],[-1,156," "]],[158,158],[156,156]]],[1531883518446,["wangnan@wangnandeMacBook-Pro.local",[[1,187,"的UID和GID相同，否则只能读，不能写；"]],[187,187],[208,208]]],[1531883556422,[null,[[-1,156,"a"],[1,157," "]],[156,156],[158,158]]],[1531883556422,[null,[[1,156,"a"],[-1,156," "]],[158,158],[156,156]]],[1531883523888,["wangnan@wangnandeMacBook-Pro.local",[[1,210,"\n"]],[208,208],[209,209]]],[1531883543072,["wangnan@wangnandeMacBook-Pro.local",[[1,209,"- 客户端的IP应该配置进服务端 、"]],[209,209],[227,227]]],[1531883543973,["wangnan@wangnandeMacBook-Pro.local",[[-1,226,"、"]],[227,227],[226,226]]],[1531883555290,["wangnan@wangnandeMacBook-Pro.local",[[1,226,"/etc/exports里面，否则服务端会拒绝访问；"]],[226,226],[252,252]]]]],["4ce57c06-7cec-43d2-8bab-93ed1f42957c",1533826074844,"CentOS 7.2 Install NFS\n===\n\nhttp://www.cnblogs.com/zhangmingcheng/p/6134210.html\nhttp://www.cnblogs.com/mchina/archive/2013/01/03/2840040.html\n\n** 重要，目录权限问题 **\n- 客户端想要操作NFS目录的用户应该和服务端目录用户的UID和GID相同，否则只能读，不能写；\n- 客户端的IP应该配置进服务端 /etc/exports里面，否则服务端会拒绝访问；\n\n服务端：\n```\nyum install -y nfs-utils\necho '/data/wwwroot/upload   *.anhao(rw,no_root_squash,no_all_squash,sync)' >> /etc/exports\nsystemctl enable rpcbind && systemctl start rpcbind\nsystemctl enable nfs-server && systemctl start nfs-server\n# 确认rpcbind是否启动\nrpcinfo -p\n\nexportfs -a\n\n# 查看共享目录\nexportfs\n```\n\n客户端：\n```\nyum install -y nfs-utils\nsystemctl enable rpcbind.service\nsystemctl start rpcbind.service\n# **注意：客户端不需要启动nfs服务**\n\nmkdir -p /data/wwwroot/upload\nmount -t nfs 1.app.anhao:/data/wwwroot/upload  /data/wwwroot/upload\ndf\n```\nQ1:\nmount: wrong fs type, bad option, bad superblock on 192.168.0.106:/home/nfs1,\n       missing codepage or helper program, or other error\n       (for several filesystems (e.g. nfs, cifs) you might\n       need a /sbin/mount.<type> helper program)\n       In some cases useful info is found in syslog - try\n       dmesg | tail  or so\nA1:\n```\napt-get install nfs-common\n\nyum install nfs-utils\n```\nQ2: \nmount.nfs: access denied by server while mounting 1.app.anhao:/data/wwwroot/upload\nA2:\n去服务端\n```\nvim /etc/exports\n# <输出目录> [客户端1 选项（访问权限,用户映射,其他）] [客户端2 选项（访问权限,用户映射,其他）]\n/data/wwwroot/upload   *.anhao(rw,no_root_squash,no_all_squash,sync)\n```\n\n\n附录：\n\n配置参考\nNFS服务器的配置相对比较简单，只需要在相应的配置文件中进行设置，然后启动NFS服务器即可。\n\nNFS的常用目录\n\n/etc/exports                           NFS服务的主要配置文件\n\n/usr/sbin/exportfs                   NFS服务的管理命令\n\n/usr/sbin/showmount              客户端的查看命令\n\n/var/lib/nfs/etab                      记录NFS分享出来的目录的完整权限设定值\n\n/var/lib/nfs/xtab                      记录曾经登录过的客户端信息\n\nNFS服务的配置文件为 /etc/exports，这个文件是NFS的主要配置文件，不过系统并没有默认值，所以这个文件不一定会存在，可能要使用vim手动建立，然后在文件里面写入配置内容。\n\n/etc/exports文件内容格式：\n\n<输出目录> [客户端1 选项（访问权限,用户映射,其他）] [客户端2 选项（访问权限,用户映射,其他）]\n\na. 输出目录：\n\n输出目录是指NFS系统中需要共享给客户机使用的目录；\n\nb. 客户端：\n\n客户端是指网络中可以访问这个NFS输出目录的计算机\n\n客户端常用的指定方式\n\n*   指定ip地址的主机：192.168.0.200\n*   指定子网中的所有主机：192.168.0.0/24 192.168.0.0/255.255.255.0\n*   指定域名的主机：david.bsmart.cn\n*   指定域中的所有主机：*.bsmart.cn\n*   所有主机：*\n\nc. 选项：\n\n选项用来设置输出目录的访问权限、用户映射等。\n\nNFS主要有3类选项：\n\n访问权限选项\n\n*   设置输出目录只读：ro\n*   设置输出目录读写：rw\n\n用户映射选项\n\n*   all_squash：将远程访问的所有普通用户及所属组都映射为匿名用户或用户组（nfsnobody）；\n*   no_all_squash：与all_squash取反（默认设置）；\n*   root_squash：将root用户及所属组都映射为匿名用户或用户组（默认设置）；\n*   no_root_squash：与rootsquash取反；\n*   anonuid=xxx：将远程访问的所有用户都映射为匿名用户，并指定该用户为本地用户（UID=xxx）；\n*   anongid=xxx：将远程访问的所有用户组都映射为匿名用户组账户，并指定该匿名用户组账户为本地用户组账户（GID=xxx）；\n\n其它选项\n\n*   secure：限制客户端只能从小于1024的tcp/ip端口连接nfs服务器（默认设置）；\n*   insecure：允许客户端从大于1024的tcp/ip端口连接服务器；\n*   sync：将数据同步写入内存缓冲区与磁盘中，效率低，但可以保证数据的一致性；\n*   async：将数据先保存在内存缓冲区中，必要时才写入磁盘；\n*   wdelay：检查是否有相关的写操作，如果有则将这些写操作一起执行，这样可以提高效率（默认设置）；\n*   no_wdelay：若有写操作则立即执行，应与sync配合使用；\n*   subtree：若输出目录是一个子目录，则nfs服务器将检查其父目录的权限(默认设置)；\n*   no_subtree：即使输出目录是一个子目录，nfs服务器也不检查其父目录的权限，这样可以提高效率；\n\n\n\n\n",[[1533826025975,["wangnan@wangnandeMacBook-Pro.local",[[1,778,"\n"]],[777,777],[778,778]]],[1533826026104,["wangnan@wangnandeMacBook-Pro.local",[[1,779,"\n"]],[778,778],[779,779]]],[1533826026288,["wangnan@wangnandeMacBook-Pro.local",[[1,780,"\n"]],[779,779],[780,780]]],[1533826026932,["wangnan@wangnandeMacBook-Pro.local",[[1,780,"mount -t nfs 1.app.anhao:/data/wwwroot/upload  /data/wwwroot/upload\ndf"]],[780,780],[850,850]]],[1533826030936,["wangnan@wangnandeMacBook-Pro.local",[[-1,818,"/upload "]],[818,826],[818,818]]],[1533826033079,["wangnan@wangnandeMacBook-Pro.local",[[-1,840,"df"]],[842,842],[840,840]]],[1533826033212,["wangnan@wangnandeMacBook-Pro.local",[[-1,840,"\n"]],[840,840],[839,839]]],[1533826038413,["wangnan@wangnandeMacBook-Pro.local",[[-1,779,"mount -t nfs 1.app.anhao:/data/wwwroot /data/wwwroot\n/upload"]],[839,839],[779,779]]],[1533826039276,["wangnan@wangnandeMacBook-Pro.local",[[-1,779,"\n"]],[779,779],[778,778]]],[1533826039677,["wangnan@wangnandeMacBook-Pro.local",[[-1,778,"\n"]],[778,778],[777,777]]]]]]}